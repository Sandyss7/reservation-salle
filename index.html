<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R√©servation Salle de R√©union - Alpha RLH</title>
    <style>
        :root {
            --color-white: rgba(255, 255, 255, 1);
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-charcoal-800: rgba(38, 40, 40, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-700: rgba(26, 104, 115, 1);
            --color-red-400: rgba(255, 84, 89, 1);
            --color-red-500: rgba(192, 21, 47, 1);
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-slate-900-rgb: 19, 52, 59;
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            --color-error: var(--color-red-500);
            --color-success: var(--color-teal-500);
            --font-family-base: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;
            --radius-base: 8px;
            --radius-lg: 12px;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-background: var(--color-charcoal-700);
                --color-surface: var(--color-charcoal-800);
                --color-text: var(--color-gray-200);
                --color-text-secondary: rgba(167, 169, 169, 0.7);
                --color-primary: var(--color-teal-300);
                --color-border: rgba(119, 124, 124, 0.3);
                --color-card-border: rgba(119, 124, 124, 0.2);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-base);
            background: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
            padding: var(--space-20);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: var(--space-32);
            padding-bottom: var(--space-24);
            border-bottom: 2px solid var(--color-border);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: var(--space-8);
            color: var(--color-text);
        }

        .subtitle {
            color: var(--color-text-secondary);
            font-size: 1rem;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-24);
            margin-bottom: var(--space-32);
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--color-surface);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            box-shadow: var(--shadow-sm);
        }

        .card h2 {
            font-size: 1.5rem;
            margin-bottom: var(--space-20);
            color: var(--color-text);
        }

        .form-group {
            margin-bottom: var(--space-16);
        }

        label {
            display: block;
            margin-bottom: var(--space-8);
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--color-text);
        }

        input, select, textarea {
            width: 100%;
            padding: var(--space-12);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            font-size: 1rem;
            background: var(--color-background);
            color: var(--color-text);
            transition: border-color 0.2s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            display: inline-block;
            padding: var(--space-12) var(--space-24);
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-base);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
        }

        .btn:hover {
            background: var(--color-primary-hover);
        }

        .btn:active {
            background: var(--color-primary-active);
        }

        .reservation-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-12);
        }

        .reservation-item {
            background: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            padding: var(--space-16);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: box-shadow 0.2s;
        }

        .reservation-item:hover {
            box-shadow: var(--shadow-md);
        }

        .reservation-info {
            flex: 1;
        }

        .reservation-title {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: var(--space-8);
            color: var(--color-text);
        }

        .reservation-details {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
        }

        .status-badge {
            padding: var(--space-8) var(--space-16);
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-reserved {
            background: rgba(var(--color-teal-500-rgb), 0.15);
            color: var(--color-success);
            border: 1px solid rgba(var(--color-teal-500-rgb), 0.25);
        }

        .btn-delete {
            background: transparent;
            color: var(--color-error);
            border: 1px solid var(--color-error);
            padding: var(--space-8) var(--space-16);
            border-radius: var(--radius-base);
            cursor: pointer;
            font-size: 0.875rem;
            margin-left: var(--space-12);
            transition: all 0.2s;
        }

        .btn-delete:hover {
            background: var(--color-error);
            color: white;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--color-success);
            color: white;
            padding: var(--space-16) var(--space-24);
            border-radius: var(--radius-base);
            box-shadow: var(--shadow-md);
            display: none;
            animation: slideIn 0.3s ease;
            z-index: 1000;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification.show {
            display: block;
        }

        .empty-state {
            text-align: center;
            padding: var(--space-32);
            color: var(--color-text-secondary);
        }

        .calendar-view {
            margin-top: var(--space-24);
        }

        .time-slot {
            padding: var(--space-8);
            margin-bottom: var(--space-8);
            background: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            font-size: 0.875rem;
        }

        .time-slot.occupied {
            background: rgba(var(--color-teal-500-rgb), 0.1);
            border-color: var(--color-primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìÖ R√©servation Salle de R√©union</h1>
            <p class="subtitle">Syst√®me de gestion des r√©servations - Alpha RLH</p>
        </header>

        <div class="main-grid">
            <div class="card">
                <h2>Nouvelle r√©servation</h2>
                <form id="reservationForm">
                    <div class="form-group">
                        <label for="name">Votre nom</label>
                        <input type="text" id="name" required placeholder="Ex: Jean Dupont">
                    </div>

                    <div class="form-group">
                        <label for="email">Email (pour notification)</label>
                        <input type="email" id="email" required placeholder="jean.dupont@alphaRLH.com">
                    </div>

                    <div class="form-group">
                        <label for="date">Date</label>
                        <input type="date" id="date" required>
                    </div>

                    <div class="form-group">
                        <label for="startTime">Heure de d√©but</label>
                        <input type="time" id="startTime" required>
                    </div>

                    <div class="form-group">
                        <label for="endTime">Heure de fin</label>
                        <input type="time" id="endTime" required>
                    </div>

                    <div class="form-group">
                        <label for="purpose">Objet de la r√©union</label>
                        <textarea id="purpose" required placeholder="R√©union d'√©quipe, pr√©sentation client..."></textarea>
                    </div>

                    <button type="submit" class="btn">R√©server la salle</button>
                </form>
            </div>

            <div class="card">
                <h2>R√©servations en cours</h2>
                <div id="reservationList" class="reservation-list">
                    <div class="empty-state">
                        Aucune r√©servation pour le moment
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        const reservations = [];

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('fr-FR', options);
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        function sendEmailNotification(reservation) {
            // Simuler l'envoi d'email - en production, cela n√©cessite un backend
            console.log('Email envoy√© √†:', reservation.email);
            console.log('Sujet: Confirmation de r√©servation - Salle de r√©union');
            console.log(`Bonjour ${reservation.name}, votre r√©servation a √©t√© confirm√©e pour le ${formatDate(reservation.date)} de ${reservation.startTime} √† ${reservation.endTime}`);
            
            // L'email s'ouvre automatiquement dans le client mail de l'utilisateur
            const subject = encodeURIComponent(`Confirmation de r√©servation - Salle de r√©union`);
            const body = encodeURIComponent(
                `Bonjour ${reservation.name},\n\n` +
                `Votre r√©servation a √©t√© confirm√©e :\n\n` +
                `üìÖ Date : ${formatDate(reservation.date)}\n` +
                `üïê Horaire : ${reservation.startTime} - ${reservation.endTime}\n` +
                `üìù Objet : ${reservation.purpose}\n\n` +
                `Cordialement,\n` +
                `Syst√®me de r√©servation Alpha RLH`
            );
            
            window.open(`mailto:${reservation.email}?subject=${subject}&body=${body}`, '_blank');
        }

        function checkConflict(newReservation) {
            const newDate = newReservation.date;
            const newStart = newReservation.startTime;
            const newEnd = newReservation.endTime;

            return reservations.some(res => {
                if (res.date !== newDate) return false;
                
                return (newStart >= res.startTime && newStart < res.endTime) ||
                       (newEnd > res.startTime && newEnd <= res.endTime) ||
                       (newStart <= res.startTime && newEnd >= res.endTime);
            });
        }

        function renderReservations() {
            const listContainer = document.getElementById('reservationList');
            
            if (reservations.length === 0) {
                listContainer.innerHTML = '<div class="empty-state">Aucune r√©servation pour le moment</div>';
                return;
            }

            const sortedReservations = [...reservations].sort((a, b) => {
                const dateCompare = new Date(a.date) - new Date(b.date);
                if (dateCompare !== 0) return dateCompare;
                return a.startTime.localeCompare(b.startTime);
            });

            listContainer.innerHTML = sortedReservations.map((res, index) => `
                <div class="reservation-item">
                    <div class="reservation-info">
                        <div class="reservation-title">${res.purpose}</div>
                        <div class="reservation-details">
                            üë§ ${res.name} ‚Ä¢ üìÖ ${formatDate(res.date)} ‚Ä¢ üïê ${res.startTime} - ${res.endTime}
                        </div>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <span class="status-badge status-reserved">R√©serv√©</span>
                        <button class="btn-delete" onclick="deleteReservation(${index})">Annuler</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteReservation(index) {
            if (confirm('√ätes-vous s√ªr de vouloir annuler cette r√©servation ?')) {
                const deleted = reservations.splice(index, 1)[0];
                saveReservations();
                renderReservations();
                showNotification(`R√©servation de ${deleted.name} annul√©e avec succ√®s`);
            }
        }

        document.getElementById('reservationForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const newReservation = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                date: document.getElementById('date').value,
                startTime: document.getElementById('startTime').value,
                endTime: document.getElementById('endTime').value,
                purpose: document.getElementById('purpose').value
            };

            if (new Date(newReservation.date + 'T' + newReservation.startTime) >= new Date(newReservation.date + 'T' + newReservation.endTime)) {
                alert('L\'heure de fin doit √™tre apr√®s l\'heure de d√©but');
                return;
            }

            if (checkConflict(newReservation)) {
                alert('‚ö†Ô∏è Cette salle est d√©j√† r√©serv√©e pour ce cr√©neau horaire. Veuillez choisir un autre horaire.');
                return;
            }

            reservations.push(newReservation);
            saveReservations();
            renderReservations();
            showNotification(`‚úÖ R√©servation confirm√©e pour ${newReservation.name}`);
            
            sendEmailNotification(newReservation);

            this.reset();
            document.getElementById('date').value = '';
        });

        const today = new Date().toISOString().split('T')[0];
        document.getElementById('date').setAttribute('min', today);

        // Charger les r√©servations au d√©marrage
        window.addEventListener('load', function() {
            const savedReservations = localStorage.getItem('reservations');
            if (savedReservations) {
                reservations.push(...JSON.parse(savedReservations));
                renderReservations();
            }
        });

        // Sauvegarder automatiquement les r√©servations
        function saveReservations() {
            localStorage.setItem('reservations', JSON.stringify(reservations));
        }
    </script>
</body>
</html>

